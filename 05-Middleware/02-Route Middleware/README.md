## ২. রুট স্তর (Route Level Middleware)

রুট স্তরে মিডলওয়্যারগুলি নির্দিষ্ট রুটের সাথে যুক্ত করা হয়। এটি নির্দিষ্ট রুটের জন্য কাজ করে, যা শুধুমাত্র সেই রুটের ক্ষেত্রে কার্যকর হয়।

### উদাহরণ:

```jsx
let express = require('express');
let app = express();

app.get('/', function(req, res) {
    res.send("This is Home page");
});

app.get('/contact', function(req, res) {
    res.send("This is contact page");
});

app.use('/about',function(req,res,next){
    
    console.log("I am about middleware");
    next();

});

app.get('/about', function(req, res) {
    res.send("This is about page");
});

app.listen(8000, function() {
    console.log('Server running on port 8000');
});

```

এই কোডটি Express.js ব্যবহার করে একটি সার্ভার তৈরি করেছে এবং এতে **রুট স্তরের মিডলওয়্যার** যোগ করা হয়েছে। এখানে ব্যাখ্যা করা হয়েছে প্রতিটি অংশ এবং আউটপুট কেন এইভাবে হবে তা বিশদে আলোচনা করা হল:

```jsx
let express = require('express');
let app = express();
```

প্রথমে Express.js ইমপোর্ট করা হয়েছে এবং `app` নামে একটি অ্যাপ্লিকেশন অবজেক্ট তৈরি করা হয়েছে, যা সার্ভারের মূল অবজেক্ট হিসেবে কাজ করবে।

### রুটসমূহ (Routes)

```jsx
app.get('/', function(req, res) {
    res.send("This is Home page");
});
```

এখানে `"/"` রুটটি ডিফাইন করা হয়েছে। যখনই কেউ এই রুটে রিকোয়েস্ট করবে, `"This is Home page"` মেসেজটি রেসপন্স হিসেবে পাঠানো হবে।

```jsx
app.get('/contact', function(req, res) {
    res.send("This is contact page");
});
```

`"/contact"` রুটটি ডিফাইন করা হয়েছে, যেখানে এই রুটে রিকোয়েস্ট করলে `"This is contact page"` মেসেজটি রেসপন্স হিসেবে পাঠানো হবে।

### রুট স্তরের মিডলওয়্যার (Route-Level Middleware)

```jsx
app.use('/about',function(req,res,next){
    console.log("I am about middleware");
    next();
});
```

এখানে `app.use('/about',...)` এর মাধ্যমে `/about` রুটের জন্য একটি **মিডলওয়্যার** সেট করা হয়েছে। অর্থাৎ, যখনই `/about` রুটে রিকোয়েস্ট করা হবে, তখন এই মিডলওয়্যারটি চালানো হবে এবং কনসোলে `"I am about middleware"` মেসেজটি প্রদর্শিত হবে। এরপর `next()` ফাংশনটি কল করার মাধ্যমে রিকোয়েস্ট পরবর্তী হ্যান্ডলার বা রাউটে পাঠানো হবে।

```jsx
app.get('/about', function(req, res) {
    res.send("This is about page");
});
```

এই অংশে `"/about"` রুটটি ডিফাইন করা হয়েছে। `/about` রুটে রিকোয়েস্ট করলে এই রেসপন্স `"This is about page"` ক্লায়েন্টকে পাঠানো হবে।

### সার্ভার চালু করা

```jsx
app.listen(8000, function() {
    console.log('Server running on port 8000');
})

```

এই অংশটি সার্ভারটি ৮০০০ পোর্টে চালু করে এবং কনসোলে `"Server running on port 8000"` মেসেজটি প্রদর্শন করে, যা নিশ্চিত করে যে সার্ভারটি সফলভাবে চালু হয়েছে।

### আউটপুট ব্যাখ্যা

যখন `/about` রুটে রিকোয়েস্ট পাঠানো হবে, তখন মিডলওয়্যার `app.use('/about',...)` চালু হবে এবং `"I am about middleware"` মেসেজটি কনসোলে দেখাবে। এরপর `next()` ফাংশনের মাধ্যমে রিকোয়েস্ট `app.get('/about',...)` হ্যান্ডলারে যাবে, যেখানে ক্লায়েন্টকে `"This is about page"` মেসেজ পাঠানো হবে। অন্যান্য রুটে (যেমন `/` বা `/contact`) রিকোয়েস্ট করলে মিডলওয়্যারটি চালু হবে না, কারণ এটি শুধুমাত্র `/about` রুটের জন্য কাজ করে।

**উদাহরণ আউটপুট:**

- `/about` রুটে গেলে:
    - **কনসোলে:** `I am about middleware`
    - **ব্রাউজারে বা ক্লায়েন্টে:** `"This is about page"`
- `/` রুটে গেলে:
    - **কনসোলে:** কোনো মেসেজ নেই।
    - **ব্রাউজারে বা ক্লায়েন্টে:** `"This is Home page"`
- `/contact` রুটে গেলে:
    - **কনসোলে:** কোনো মেসেজ নেই।
    - **ব্রাউজারে বা ক্লায়েন্টে:** `"This is contact page"`

### কেন এই আউটপুট হবে?

এটি ঘটবে কারণ `/about` রুটের জন্য একটি রুট স্তরের মিডলওয়্যার সেট করা হয়েছে, যা শুধুমাত্র `/about` রুটে রিকোয়েস্ট করলে কার্যকর হবে। অন্যান্য রুটগুলোর জন্য মিডলওয়্যার প্রয়োগ করা হয়নি, তাই সেখানে শুধুমাত্র রাউট হ্যান্ডলারগুলো কার্যকর হবে।

### ব্যবহারের সুবিধা:

- শুধুমাত্র নির্দিষ্ট রুটের জন্য মিডলওয়্যার ব্যবহার করা যায়।
- রুটগুলির জন্য নির্দিষ্ট কাজ বা অথেনটিকেশন সম্পন্ন করতে সহায়ক।

### সারসংক্ষেপ

- **অ্যাপ্লিকেশন স্তরের মিডলওয়্যার** পুরো অ্যাপ্লিকেশনের জন্য প্রযোজ্য এবং স্বয়ংক্রিয়ভাবে সব রিকোয়েস্টের সাথে কার্যকর হয়।
- **রুট স্তরের মিডলওয়্যার** শুধুমাত্র নির্দিষ্ট রুটগুলির জন্য কার্যকর হয় এবং বিশেষ কাজ সম্পাদনের জন্য ব্যবহার করা হয়।

এভাবে, অ্যাপ্লিকেশন এবং রুট স্তরের মিডলওয়্যার ব্যবহার করে আপনি আপনার Express.js অ্যাপ্লিকেশনকে আরও কার্যকর এবং পরিচালনাযোগ্য করতে পারেন।